/*************************************
项目名称：天气预报|PKC
更新日期：2025-03-28
脚本作者：@Sheepfj
使用声明：⚠️仅供参考，🈲转载与售卖！
TG频道：https://t.me/sheep_007xiaoyang
GitHub：https://github.com/SheepFJ/QuantumultX
脚本说明：用于PKC插件的天气接口
============ Quantumult X ============

[rewrite_local]
^https:\/\/api\.sheep\.com\/sheep\/weather\/([^\/]+)\/? url script-response-body https://raw.githubusercontent.com/SheepFJ/QuantumultX/refs/heads/main/QuantumultX/API/weather/weather_loon.js
[mitm]
hostname = api.sheep.com

================ Loon ==================

*************************************/

const _0x287c14=_0x2aa4;(function(_0x1ac4f5,_0x1ac77b){const _0x3b18a2=_0x2aa4,_0x23e10e=_0x1ac4f5();while(!![]){try{const _0x3b7f20=-parseInt(_0x3b18a2(0x9f))/0x1+-parseInt(_0x3b18a2(0x97))/0x2*(parseInt(_0x3b18a2(0xad))/0x3)+-parseInt(_0x3b18a2(0xc0))/0x4*(parseInt(_0x3b18a2(0x94))/0x5)+-parseInt(_0x3b18a2(0xa8))/0x6+-parseInt(_0x3b18a2(0xaa))/0x7*(parseInt(_0x3b18a2(0x8c))/0x8)+-parseInt(_0x3b18a2(0xa1))/0x9*(-parseInt(_0x3b18a2(0x87))/0xa)+-parseInt(_0x3b18a2(0x8f))/0xb*(-parseInt(_0x3b18a2(0xb7))/0xc);if(_0x3b7f20===_0x1ac77b)break;else _0x23e10e['push'](_0x23e10e['shift']());}catch(_0x2bc4ea){_0x23e10e['push'](_0x23e10e['shift']());}}}(_0x1892,0xeaab2));const _0x446003=(function(){let _0x32c42e=!![];return function(_0x574ab6,_0x282060){const _0x481d98=_0x32c42e?function(){if(_0x282060){const _0x3c33d9=_0x282060['apply'](_0x574ab6,arguments);return _0x282060=null,_0x3c33d9;}}:function(){};return _0x32c42e=![],_0x481d98;};}()),_0x15d01a=_0x446003(this,function(){const _0x4c192a=_0x2aa4;return _0x15d01a['toString']()[_0x4c192a(0xb2)](_0x4c192a(0xb5))[_0x4c192a(0x92)]()[_0x4c192a(0x91)](_0x15d01a)[_0x4c192a(0xb2)]('(((.+)+)+)+$');});function _0x1892(){const _0x5c5118=['bind','info','document','14090FyNZFu','湖南长沙','setValueForKey','navigate','u=0,\x20i','9272tmDJHg','get','Mozilla/5.0\x20(iPhone;\x20CPU\x20iPhone\x20OS\x2018_3_1\x20like\x20Mac\x20OS\x20X)\x20AppleWebKit/605.1.15\x20(KHTML,\x20like\x20Gecko)\x20Version/18.3\x20Mobile/15E148\x20Safari/604.1','287254XapZOv','数据获取失败','constructor','toString','\x20天气预报\x0a','5VOydkT','exception','HTTP/1.1\x20200\x20OK','13736RJHIkJ','text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8','未能获取今日或明日的天气信息','undefined','body','prototype','trace','__proto__','663153GexktB','air_quality','1899bzVuOo','HTTP/1.1\x20500\x20Internal\x20Server\x20Error','console','find','gzip,\x20deflate,\x20br','parse','https://api.52vmy.cn/doc/query/tian/three.html','10459116uXSkWv','warn','609GvQTLS','Time','error','597CvHqbA','keep-alive','bearing','GET','city','search','PHPSESSID=evvviiglk2mkkoulb25i2f7799','请求失败:\x20','(((.+)+)+)+$','sheep_weather_area','2592oJTQXU','text/plain;\x20charset=utf-8','data','then','weather','{}.constructor(\x22return\x20this\x22)(\x20)','解析数据失败','log','getDay','4411268mzQWTi','apply'];_0x1892=function(){return _0x5c5118;};return _0x1892();}_0x15d01a();const _0x3ea570=(function(){let _0x481348=!![];return function(_0x327b98,_0x3de241){const _0x5714f2=_0x481348?function(){const _0x9cec28=_0x2aa4;if(_0x3de241){const _0x4aaa1f=_0x3de241[_0x9cec28(0x83)](_0x327b98,arguments);return _0x3de241=null,_0x4aaa1f;}}:function(){};return _0x481348=![],_0x5714f2;};}()),_0x49637e=_0x3ea570(this,function(){const _0x3184d9=_0x2aa4;let _0x26bf59;try{const _0x31428f=Function('return\x20(function()\x20'+_0x3184d9(0xbc)+');');_0x26bf59=_0x31428f();}catch(_0x1713f6){_0x26bf59=window;}const _0x4267fe=_0x26bf59[_0x3184d9(0xa3)]=_0x26bf59['console']||{},_0x4bcae9=[_0x3184d9(0xbe),_0x3184d9(0xa9),_0x3184d9(0x85),_0x3184d9(0xac),_0x3184d9(0x95),'table',_0x3184d9(0x9d)];for(let _0x2650d0=0x0;_0x2650d0<_0x4bcae9['length'];_0x2650d0++){const _0x46992d=_0x3ea570[_0x3184d9(0x91)][_0x3184d9(0x9c)][_0x3184d9(0x84)](_0x3ea570),_0x3d4417=_0x4bcae9[_0x2650d0],_0x204d85=_0x4267fe[_0x3d4417]||_0x46992d;_0x46992d[_0x3184d9(0x9e)]=_0x3ea570['bind'](_0x3ea570),_0x46992d[_0x3184d9(0x92)]=_0x204d85['toString'][_0x3184d9(0x84)](_0x204d85),_0x4267fe[_0x3d4417]=_0x46992d;}});_0x49637e();function _0x2aa4(_0x464a86,_0x53ccdf){const _0x5fc3ee=_0x1892();return _0x2aa4=function(_0x49637e,_0x3ea570){_0x49637e=_0x49637e-0x83;let _0xd85f7d=_0x5fc3ee[_0x49637e];return _0xd85f7d;},_0x2aa4(_0x464a86,_0x53ccdf);}const isLoon=typeof $persistentStore!=='undefined',isQuanX=typeof $prefs!==_0x287c14(0x9a),storage={'get':_0x21aaf3=>isLoon?$persistentStore['read'](_0x21aaf3):isQuanX?$prefs['valueForKey'](_0x21aaf3):null,'set':(_0x23554c,_0x464dfe)=>isLoon?$persistentStore['write'](_0x464dfe,_0x23554c):isQuanX?$prefs[_0x287c14(0x89)](_0x464dfe,_0x23554c):![]},defaultCity=_0x287c14(0x88),city=storage[_0x287c14(0x8d)](_0x287c14(0xb6))||defaultCity,encodedCity=encodeURIComponent(city),getTodayAndTomorrow=()=>{const _0x45be85=_0x287c14,_0x5f06ad=['周日','周一','周二','周三','周四','周五','周六'],_0x31f9f8=new Date()[_0x45be85(0xbf)](),_0x29f02b=(_0x31f9f8+0x1)%0x7;return{'today':_0x5f06ad[_0x31f9f8],'tomorrow':_0x5f06ad[_0x29f02b]};},{today,tomorrow}=getTodayAndTomorrow(),apiUrl='https://api.52vmy.cn/api/query/tian/three?city='+encodedCity,headers={'Sec-Fetch-Dest':_0x287c14(0x86),'Connection':_0x287c14(0xae),'Accept-Encoding':_0x287c14(0xa5),'Priority':_0x287c14(0x8b),'Sec-Fetch-Site':'same-origin','User-Agent':_0x287c14(0x8e),'Sec-Fetch-Mode':_0x287c14(0x8a),'Cookie':_0x287c14(0xb3),'Referer':_0x287c14(0xa7),'Host':'api.52vmy.cn','Accept-Language':'zh-CN,zh-Hans;q=0.9','Accept':_0x287c14(0x98)},myRequest={'url':apiUrl,'method':_0x287c14(0xb0),'headers':headers};$task['fetch'](myRequest)[_0x287c14(0xba)](_0x132f2d=>{const _0x276766=_0x287c14;let _0xd4eac9=_0x276766(0x90);try{const _0x33566b=JSON[_0x276766(0xa6)](_0x132f2d[_0x276766(0x9b)]);if(_0x33566b['code']===0xc8&&_0x33566b[_0x276766(0xb9)]&&_0x33566b['data'][_0x276766(0xb9)]){const _0x433bff=_0x33566b['data'][_0x276766(0xb1)],_0x4c9a26=_0x33566b[_0x276766(0xb9)][_0x276766(0xb9)];let _0x5d7e8e=_0x4c9a26[_0x276766(0xa4)](_0x4f7f88=>_0x4f7f88[_0x276766(0xab)]===today),_0x12f177=_0x4c9a26['find'](_0x5717f1=>_0x5717f1[_0x276766(0xab)]===tomorrow);_0x5d7e8e&&_0x12f177?(_0xd4eac9='📍'+_0x433bff+_0x276766(0x93),_0xd4eac9+='🌟今日\x20'+_0x5d7e8e['temperature']+'\x20'+_0x5d7e8e[_0x276766(0xbb)]+'\x20'+_0x5d7e8e[_0x276766(0xaf)]+'\x20'+_0x5d7e8e[_0x276766(0xa0)]+'\x0a',_0xd4eac9+='明日\x20'+_0x12f177['temperature']+'\x20'+_0x12f177[_0x276766(0xbb)]+'\x20'+_0x12f177[_0x276766(0xaf)]+'\x20'+_0x12f177['air_quality']):_0xd4eac9=_0x276766(0x99),storage['set']('weather_data',_0xd4eac9);}}catch(_0x1e4946){_0xd4eac9=_0x276766(0xbd);}$done({'status':_0x276766(0x96),'headers':{'Content-Type':_0x276766(0xb8)},'body':_0xd4eac9});},_0x2362dd=>{const _0x1bf17a=_0x287c14;$done({'status':_0x1bf17a(0xa2),'headers':{'Content-Type':_0x1bf17a(0xb8)},'body':_0x1bf17a(0xb4)+_0x2362dd['error']});});
