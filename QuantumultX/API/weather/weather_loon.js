/*************************************
项目名称：天气预报|PKC
更新日期：2025-03-28
脚本作者：@Sheepfj
使用声明：⚠️仅供参考，🈲转载与售卖！
TG频道：https://t.me/sheep_007xiaoyang
GitHub：https://github.com/SheepFJ/QuantumultX
脚本说明：用于PKC插件的天气接口
============ Quantumult X ============

[mitm]
hostname = api.sheep.com 

================ Loon ==================

[Script]
http-response ^https:\/\/api\.sheep\.com\/sheep\/weather\/([^\/]+)\/? script-path=https://raw.githubusercontent.com/SheepFJ/QuantumultX/refs/heads/main/QuantumultX/API/weather/weather_loon.js,requires-body=false,tag=近三日天气

*************************************/

const _0x493f9e=_0x8103;(function(_0x488c03,_0x2c2bf7){const _0x18c2cd=_0x8103,_0x1ddb2d=_0x488c03();while(!![]){try{const _0x553c0c=parseInt(_0x18c2cd(0xa7))/0x1*(parseInt(_0x18c2cd(0x85))/0x2)+parseInt(_0x18c2cd(0x8a))/0x3+-parseInt(_0x18c2cd(0x9a))/0x4+-parseInt(_0x18c2cd(0xb9))/0x5*(-parseInt(_0x18c2cd(0xa2))/0x6)+parseInt(_0x18c2cd(0x90))/0x7*(parseInt(_0x18c2cd(0x91))/0x8)+parseInt(_0x18c2cd(0xbf))/0x9*(parseInt(_0x18c2cd(0xa4))/0xa)+-parseInt(_0x18c2cd(0xb6))/0xb;if(_0x553c0c===_0x2c2bf7)break;else _0x1ddb2d['push'](_0x1ddb2d['shift']());}catch(_0x578276){_0x1ddb2d['push'](_0x1ddb2d['shift']());}}}(_0x5d8f,0xb8e75));const _0x596389=(function(){let _0x497ee6=!![];return function(_0x551974,_0x332d8a){const _0x55b0d7=_0x497ee6?function(){const _0x324b4d=_0x8103;if(_0x332d8a){const _0x4ed410=_0x332d8a[_0x324b4d(0x95)](_0x551974,arguments);return _0x332d8a=null,_0x4ed410;}}:function(){};return _0x497ee6=![],_0x55b0d7;};}()),_0x4ea060=_0x596389(this,function(){const _0x37b115=_0x8103;return _0x4ea060[_0x37b115(0x94)]()[_0x37b115(0x98)]('(((.+)+)+)+$')[_0x37b115(0x94)]()[_0x37b115(0xbb)](_0x4ea060)[_0x37b115(0x98)](_0x37b115(0xa9));});_0x4ea060();const _0x1e2c3f=(function(){let _0x56d757=!![];return function(_0x3e4746,_0x97f0fd){const _0x516204=_0x56d757?function(){const _0x3f3f94=_0x8103;if(_0x97f0fd){const _0x46f3c9=_0x97f0fd[_0x3f3f94(0x95)](_0x3e4746,arguments);return _0x97f0fd=null,_0x46f3c9;}}:function(){};return _0x56d757=![],_0x516204;};}()),_0x6de43f=_0x1e2c3f(this,function(){const _0xb69082=_0x8103,_0x31203f=function(){let _0x4e3002;try{_0x4e3002=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x54ad23){_0x4e3002=window;}return _0x4e3002;},_0x683230=_0x31203f(),_0x1d84f6=_0x683230[_0xb69082(0xae)]=_0x683230[_0xb69082(0xae)]||{},_0xf4c62f=[_0xb69082(0x9b),'warn','info',_0xb69082(0x8b),_0xb69082(0x97),'table','trace'];for(let _0x45e29f=0x0;_0x45e29f<_0xf4c62f[_0xb69082(0xb4)];_0x45e29f++){const _0x5d907d=_0x1e2c3f[_0xb69082(0xbb)][_0xb69082(0xad)][_0xb69082(0xbd)](_0x1e2c3f),_0xc908da=_0xf4c62f[_0x45e29f],_0xecd813=_0x1d84f6[_0xc908da]||_0x5d907d;_0x5d907d['__proto__']=_0x1e2c3f[_0xb69082(0xbd)](_0x1e2c3f),_0x5d907d[_0xb69082(0x94)]=_0xecd813[_0xb69082(0x94)]['bind'](_0xecd813),_0x1d84f6[_0xc908da]=_0x5d907d;}});function _0x5d8f(){const _0xa1d9b=['Time','11950nwglZW','请求失败:\x20','gzip,\x20deflate,\x20br','setValueForKey','🌟今日\x20','1194582NfbrGJ','error','HTTP/1.1\x20200\x20OK','text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8','read','错误～示例：长沙市开福区','3493zPUhrI','8680ZyJAdM','write','\x20天气预报\x0a','toString','apply','air_quality','exception','search','body','2206908EZaMUT','log','navigate','then','解析数据失败','parse','temperature','keep-alive','7725852sEdang','same-origin','1610PARfOh','u=0,\x20i','weather_data','249qBMOBA','HTTP/1.1\x20400\x20Bad\x20Request','(((.+)+)+)+$','https://api.52vmy.cn/api/query/tian/three?city=','data','PHPSESSID=evvviiglk2mkkoulb25i2f7799','prototype','console','bearing','filter','document','无效请求','text/plain;\x20charset=utf-8','length','set','37767796VvhDlG','code','https://api.52vmy.cn/doc/query/tian/three.html','5JBpeTj','valueForKey','constructor','url','bind','match','57438BtcFVK','undefined'];_0x5d8f=function(){return _0xa1d9b;};return _0x5d8f();}_0x6de43f();function _0x8103(_0x312d34,_0x322df8){const _0x407674=_0x5d8f();return _0x8103=function(_0x6de43f,_0x1e2c3f){_0x6de43f=_0x6de43f-0x85;let _0x5db180=_0x407674[_0x6de43f];return _0x5db180;},_0x8103(_0x312d34,_0x322df8);}const urlPattern=/^https:\/\/api\.sheep\.com\/sheep\/weather\/([^\/]+)\/?/,requestUrl=$request[_0x493f9e(0xbc)],match=requestUrl[_0x493f9e(0xbe)](urlPattern),isLoon=typeof $persistentStore!==_0x493f9e(0xc0),isQuanX=typeof $prefs!==_0x493f9e(0xc0),storage={'get':_0x1ffa89=>isLoon?$persistentStore[_0x493f9e(0x8e)](_0x1ffa89):isQuanX?$prefs[_0x493f9e(0xba)](_0x1ffa89):null,'set':(_0x3c70db,_0x5ae1ad)=>isLoon?$persistentStore[_0x493f9e(0x92)](_0x5ae1ad,_0x3c70db):isQuanX?$prefs[_0x493f9e(0x88)](_0x5ae1ad,_0x3c70db):![]},getDayLabels=()=>{const _0x3717ee=['周日','周一','周二','周三','周四','周五','周六'],_0x32f087=new Date()['getDay'](),_0x552272=(_0x32f087+0x1)%0x7;return{'today':_0x3717ee[_0x32f087],'tomorrow':_0x3717ee[_0x552272]};};if(match){const city=encodeURIComponent(match[0x1]),apiUrl=_0x493f9e(0xaa)+city,headers={'Sec-Fetch-Dest':_0x493f9e(0xb1),'Connection':_0x493f9e(0xa1),'Accept-Encoding':_0x493f9e(0x87),'Priority':_0x493f9e(0xa5),'Sec-Fetch-Site':_0x493f9e(0xa3),'User-Agent':'Mozilla/5.0\x20(iPhone;\x20CPU\x20iPhone\x20OS\x2018_3_1\x20like\x20Mac\x20OS\x20X)\x20AppleWebKit/605.1.15\x20(KHTML,\x20like\x20Gecko)\x20Version/18.3\x20Mobile/15E148\x20Safari/604.1','Sec-Fetch-Mode':_0x493f9e(0x9c),'Cookie':_0x493f9e(0xac),'Referer':_0x493f9e(0xb8),'Host':'api.52vmy.cn','Accept-Language':'zh-CN,zh-Hans;q=0.9','Accept':_0x493f9e(0x8d)},myRequest={'url':apiUrl,'method':'GET','headers':headers};$task['fetch'](myRequest)[_0x493f9e(0x9d)](_0x345d77=>{const _0x57cf7b=_0x493f9e;let _0x27e3aa=_0x57cf7b(0x8f);try{const _0x49003c=JSON[_0x57cf7b(0x9f)](_0x345d77[_0x57cf7b(0x99)]);if(_0x49003c[_0x57cf7b(0xb7)]==0xc8&&_0x49003c[_0x57cf7b(0xab)]&&_0x49003c[_0x57cf7b(0xab)][_0x57cf7b(0xab)]){const _0x5dc56a=_0x49003c[_0x57cf7b(0xab)]['city'],_0xfdcfa1=_0x49003c[_0x57cf7b(0xab)][_0x57cf7b(0xab)],{today:_0x57b735,tomorrow:_0x2afb51}=getDayLabels(),_0x9a9326=_0xfdcfa1[_0x57cf7b(0xb0)](_0x2c8b74=>_0x2c8b74[_0x57cf7b(0xc1)]===_0x57b735||_0x2c8b74[_0x57cf7b(0xc1)]===_0x2afb51);if(_0x9a9326['length']===0x2){const [_0x125983,_0x4858a1]=_0x9a9326;_0x27e3aa='📍\x20'+_0x5dc56a+_0x57cf7b(0x93)+(_0x57cf7b(0x89)+_0x125983[_0x57cf7b(0xa0)]+'\x20'+_0x125983['weather']+'\x20'+_0x125983[_0x57cf7b(0xaf)]+'\x20'+_0x125983[_0x57cf7b(0x96)]+'\x0a')+('明日\x20'+_0x4858a1[_0x57cf7b(0xa0)]+'\x20'+_0x4858a1['weather']+'\x20'+_0x4858a1[_0x57cf7b(0xaf)]+'\x20'+_0x4858a1['air_quality']),storage[_0x57cf7b(0xb5)](_0x57cf7b(0xa6),_0x27e3aa);}}}catch(_0x57a76c){_0x27e3aa=_0x57cf7b(0x9e);}$done({'status':_0x57cf7b(0x8c),'headers':{'Content-Type':_0x57cf7b(0xb3)},'body':_0x27e3aa});},_0x359795=>{const _0x1b3ece=_0x493f9e;$done({'status':'HTTP/1.1\x20500\x20Internal\x20Server\x20Error','headers':{'Content-Type':_0x1b3ece(0xb3)},'body':_0x1b3ece(0x86)+_0x359795[_0x1b3ece(0x8b)]});});}else $done({'status':_0x493f9e(0xa8),'headers':{'Content-Type':_0x493f9e(0xb3)},'body':_0x493f9e(0xb2)});
