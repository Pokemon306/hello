/*************************************
项目名称：天气预报|PKC
更新日期：2025-03-28
脚本作者：@Sheepfj
使用声明：⚠️仅供参考，🈲转载与售卖！
TG频道：https://t.me/sheep_007xiaoyang
GitHub：https://github.com/SheepFJ/QuantumultX
脚本说明：用于PKC插件的天气接口
============ Quantumult X ============

[mitm]
hostname = api.sheep.com 

================ Loon ==================

[Script]
http-response ^https:\/\/api\.sheep\.com\/sheep\/weather\/([^\/]+)\/? script-path=https://raw.githubusercontent.com/SheepFJ/QuantumultX/refs/heads/main/QuantumultX/API/weather/weather_loon.js,requires-body=false,tag=近三日天气

*************************************/
const _0x2921e5=_0x2859;(function(_0x3ad3a8,_0x34a9b9){const _0x4421fe=_0x2859,_0x3d9b76=_0x3ad3a8();while(!![]){try{const _0x3da607=-parseInt(_0x4421fe(0x155))/0x1+parseInt(_0x4421fe(0x12e))/0x2+parseInt(_0x4421fe(0x143))/0x3*(parseInt(_0x4421fe(0x16a))/0x4)+-parseInt(_0x4421fe(0x159))/0x5+parseInt(_0x4421fe(0x15e))/0x6*(parseInt(_0x4421fe(0x142))/0x7)+parseInt(_0x4421fe(0x16c))/0x8*(-parseInt(_0x4421fe(0x135))/0x9)+-parseInt(_0x4421fe(0x161))/0xa*(parseInt(_0x4421fe(0x13d))/0xb);if(_0x3da607===_0x34a9b9)break;else _0x3d9b76['push'](_0x3d9b76['shift']());}catch(_0x4b68d7){_0x3d9b76['push'](_0x3d9b76['shift']());}}}(_0x1db6,0xc8d97));const _0x4581e7=(function(){let _0x139807=!![];return function(_0xbb08a2,_0x47d1f6){const _0x343779=_0x139807?function(){const _0x3e4dca=_0x2859;if(_0x47d1f6){const _0x5ac436=_0x47d1f6[_0x3e4dca(0x13f)](_0xbb08a2,arguments);return _0x47d1f6=null,_0x5ac436;}}:function(){};return _0x139807=![],_0x343779;};}()),_0x3dc12e=_0x4581e7(this,function(){const _0x4bf441=_0x2859;return _0x3dc12e[_0x4bf441(0x15b)]()['search'](_0x4bf441(0x148))[_0x4bf441(0x15b)]()[_0x4bf441(0x130)](_0x3dc12e)[_0x4bf441(0x15c)](_0x4bf441(0x148));});function _0x2859(_0x2bacb4,_0x223e9a){const _0x4df556=_0x1db6();return _0x2859=function(_0x336735,_0x480d9d){_0x336735=_0x336735-0x12a;let _0xcbe174=_0x4df556[_0x336735];return _0xcbe174;},_0x2859(_0x2bacb4,_0x223e9a);}_0x3dc12e();const _0x480d9d=(function(){let _0x2c15d8=!![];return function(_0x5e3eb2,_0x2e0bfd){const _0xd73947=_0x2c15d8?function(){const _0x165312=_0x2859;if(_0x2e0bfd){const _0x108661=_0x2e0bfd[_0x165312(0x13f)](_0x5e3eb2,arguments);return _0x2e0bfd=null,_0x108661;}}:function(){};return _0x2c15d8=![],_0xd73947;};}()),_0x336735=_0x480d9d(this,function(){const _0x2b959e=_0x2859;let _0x18ef01;try{const _0x55ec07=Function(_0x2b959e(0x151)+_0x2b959e(0x166)+');');_0x18ef01=_0x55ec07();}catch(_0x1dde29){_0x18ef01=window;}const _0x51961d=_0x18ef01[_0x2b959e(0x15a)]=_0x18ef01[_0x2b959e(0x15a)]||{},_0x4f6803=[_0x2b959e(0x14a),_0x2b959e(0x13a),_0x2b959e(0x16d),_0x2b959e(0x157),_0x2b959e(0x153),_0x2b959e(0x137),_0x2b959e(0x12f)];for(let _0xa0bf44=0x0;_0xa0bf44<_0x4f6803[_0x2b959e(0x145)];_0xa0bf44++){const _0x26a603=_0x480d9d['constructor'][_0x2b959e(0x132)]['bind'](_0x480d9d),_0x39ef41=_0x4f6803[_0xa0bf44],_0x50e19c=_0x51961d[_0x39ef41]||_0x26a603;_0x26a603[_0x2b959e(0x156)]=_0x480d9d[_0x2b959e(0x141)](_0x480d9d),_0x26a603[_0x2b959e(0x15b)]=_0x50e19c[_0x2b959e(0x15b)]['bind'](_0x50e19c),_0x51961d[_0x39ef41]=_0x26a603;}});_0x336735();function _0x1db6(){const _0x2794d8=['valueForKey','5529012EeCPuj','api.52vmy.cn','read','90sefXZf','错误~示例：长沙市开福区','zh-CN,zh-Hans;q=0.9','请求失败:\x20','url','{}.constructor(\x22return\x20this\x22)(\x20)','bearing','temperature','text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8','479272wMIYWs','undefined','8AZoJoq','info','city','same-origin','catch','🌟今日\x20','document','1465086CwlWEG','trace','constructor','navigate','prototype','match','weather','12107367CWbPFP','weather_data','table','明日\x20','code','warn','then','air_quality','323191sNRZDC','https://api.52vmy.cn/doc/query/tian/three.html','apply','Time','bind','7iPJMLt','36VDYECR','filter','length','getDay','gzip,\x20deflate,\x20br','(((.+)+)+)+$','fetch','log','u=0,\x20i','set','Mozilla/5.0\x20(iPhone;\x20CPU\x20iPhone\x20OS\x2018_3_1\x20like\x20Mac\x20OS\x20X)\x20AppleWebKit/605.1.15\x20(KHTML,\x20like\x20Gecko)\x20Version/18.3\x20Mobile/15E148\x20Safari/604.1','HTTP/1.1\x20400\x20Bad\x20Request','解析数据失败','text/plain;\x20charset=utf-8','return\x20(function()\x20','parse','exception','data','161864PPGKJQ','__proto__','error','\x20天气预报\x0a','2488130oTQpys','console','toString','search'];_0x1db6=function(){return _0x2794d8;};return _0x1db6();}const urlPattern=/^https:\/\/api\.sheep\.com\/sheep\/weather\/([^\/]+)\/?/,requestUrl=$request[_0x2921e5(0x165)],match=requestUrl[_0x2921e5(0x133)](urlPattern),isLoon=typeof $persistentStore!==_0x2921e5(0x16b),isQuanX=typeof $prefs!==_0x2921e5(0x16b),storage={'get':_0x3b6d26=>isLoon?$persistentStore[_0x2921e5(0x160)](_0x3b6d26):isQuanX?$prefs[_0x2921e5(0x15d)](_0x3b6d26):null,'set':(_0x394f14,_0x147fc3)=>isLoon?$persistentStore['write'](_0x147fc3,_0x394f14):isQuanX?$prefs['setValueForKey'](_0x147fc3,_0x394f14):![]},getDayLabels=()=>{const _0xf891a7=_0x2921e5,_0x306574=['周日','周一','周二','周三','周四','周五','周六'],_0x3a6e96=new Date()[_0xf891a7(0x146)](),_0x48a004=(_0x3a6e96+0x1)%0x7;return{'today':_0x306574[_0x3a6e96],'tomorrow':_0x306574[_0x48a004]};};if(match){const city=encodeURIComponent(match[0x1]),apiUrl='https://api.52vmy.cn/api/query/tian/three?city='+city,headers={'Sec-Fetch-Dest':_0x2921e5(0x12d),'Connection':'keep-alive','Accept-Encoding':_0x2921e5(0x147),'Priority':_0x2921e5(0x14b),'Sec-Fetch-Site':_0x2921e5(0x12a),'User-Agent':_0x2921e5(0x14d),'Sec-Fetch-Mode':_0x2921e5(0x131),'Cookie':'PHPSESSID=evvviiglk2mkkoulb25i2f7799','Referer':_0x2921e5(0x13e),'Host':_0x2921e5(0x15f),'Accept-Language':_0x2921e5(0x163),'Accept':_0x2921e5(0x169)},handleResponse=(_0x515814,_0x1fcf76,_0x17aea6)=>{const _0x25d65b=_0x2921e5;let _0x4beda6=_0x25d65b(0x162);if(_0x515814)_0x4beda6=_0x25d65b(0x164)+_0x515814;else try{const _0xee6d4d=JSON[_0x25d65b(0x152)](_0x17aea6);if(_0xee6d4d[_0x25d65b(0x139)]==0xc8&&_0xee6d4d[_0x25d65b(0x154)]&&_0xee6d4d[_0x25d65b(0x154)][_0x25d65b(0x154)]){const _0x5b3362=_0xee6d4d['data'][_0x25d65b(0x16e)],_0xdcb54a=_0xee6d4d[_0x25d65b(0x154)][_0x25d65b(0x154)],{today:_0x225e6a,tomorrow:_0x5c709d}=getDayLabels(),_0x3e43be=_0xdcb54a[_0x25d65b(0x144)](_0x4801d9=>_0x4801d9['Time']===_0x225e6a||_0x4801d9[_0x25d65b(0x140)]===_0x5c709d);if(_0x3e43be['length']===0x2){const [_0x55eaea,_0x11eb14]=_0x3e43be;_0x4beda6='📍\x20'+_0x5b3362+_0x25d65b(0x158)+(_0x25d65b(0x12c)+_0x55eaea[_0x25d65b(0x168)]+'\x20'+_0x55eaea['weather']+'\x20'+_0x55eaea[_0x25d65b(0x167)]+'\x20'+_0x55eaea[_0x25d65b(0x13c)]+'\x0a')+(_0x25d65b(0x138)+_0x11eb14['temperature']+'\x20'+_0x11eb14[_0x25d65b(0x134)]+'\x20'+_0x11eb14[_0x25d65b(0x167)]+'\x20'+_0x11eb14[_0x25d65b(0x13c)]),storage[_0x25d65b(0x14c)](_0x25d65b(0x136),_0x4beda6);}}}catch(_0x3832d8){_0x4beda6=_0x25d65b(0x14f);}$done({'status':'HTTP/1.1\x20200\x20OK','headers':{'Content-Type':'text/plain;\x20charset=utf-8'},'body':_0x4beda6});};if(isQuanX)$task[_0x2921e5(0x149)]({'url':apiUrl,'headers':headers})[_0x2921e5(0x13b)](_0x1e27d4=>{handleResponse(null,_0x1e27d4,_0x1e27d4['body']);})[_0x2921e5(0x12b)](_0x544da9=>{handleResponse(_0x544da9);});else isLoon&&$httpClient['get']({'url':apiUrl,'headers':headers},handleResponse);}else $done({'status':_0x2921e5(0x14e),'headers':{'Content-Type':_0x2921e5(0x150)},'body':'无效请求'});
