const _0x6ef497=_0x1010;(function(_0x3c09eb,_0xf2f1b9){const _0x17649a=_0x1010,_0x5c1d7a=_0x3c09eb();while(!![]){try{const _0x476213=-parseInt(_0x17649a(0x172))/0x1+parseInt(_0x17649a(0x16b))/0x2+parseInt(_0x17649a(0x173))/0x3+parseInt(_0x17649a(0x160))/0x4*(parseInt(_0x17649a(0x19b))/0x5)+parseInt(_0x17649a(0x199))/0x6+parseInt(_0x17649a(0x15d))/0x7+-parseInt(_0x17649a(0x19f))/0x8*(parseInt(_0x17649a(0x16d))/0x9);if(_0x476213===_0xf2f1b9)break;else _0x5c1d7a['push'](_0x5c1d7a['shift']());}catch(_0x5aecbe){_0x5c1d7a['push'](_0x5c1d7a['shift']());}}}(_0x2288,0xd69a9));const _0x30ac25=(function(){let _0x5d96e4=!![];return function(_0x201760,_0x1c0896){const _0x2dba17=_0x5d96e4?function(){const _0x1ab82e=_0x1010;if(_0x1c0896){const _0x187d42=_0x1c0896[_0x1ab82e(0x188)](_0x201760,arguments);return _0x1c0896=null,_0x187d42;}}:function(){};return _0x5d96e4=![],_0x2dba17;};}()),_0x4c1329=_0x30ac25(this,function(){const _0xc0282f=_0x1010;return _0x4c1329[_0xc0282f(0x191)]()[_0xc0282f(0x178)]('(((.+)+)+)+$')['toString']()['constructor'](_0x4c1329)[_0xc0282f(0x178)](_0xc0282f(0x19c));});_0x4c1329();const _0x15b3b3=(function(){let _0x46ba31=!![];return function(_0x5c8a8d,_0xdf173d){const _0x5a07ce=_0x46ba31?function(){if(_0xdf173d){const _0x3cd23e=_0xdf173d['apply'](_0x5c8a8d,arguments);return _0xdf173d=null,_0x3cd23e;}}:function(){};return _0x46ba31=![],_0x5a07ce;};}()),_0x12a31c=_0x15b3b3(this,function(){const _0x1c7ed0=_0x1010;let _0x5715b2;try{const _0x30e567=Function(_0x1c7ed0(0x196)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x5715b2=_0x30e567();}catch(_0x455520){_0x5715b2=window;}const _0x16b4d4=_0x5715b2['console']=_0x5715b2[_0x1c7ed0(0x16f)]||{},_0x32af2f=['log',_0x1c7ed0(0x17d),_0x1c7ed0(0x198),_0x1c7ed0(0x15f),_0x1c7ed0(0x183),_0x1c7ed0(0x17f),'trace'];for(let _0x3e8f61=0x0;_0x3e8f61<_0x32af2f[_0x1c7ed0(0x169)];_0x3e8f61++){const _0x42f498=_0x15b3b3['constructor']['prototype']['bind'](_0x15b3b3),_0x1b6028=_0x32af2f[_0x3e8f61],_0x55a213=_0x16b4d4[_0x1b6028]||_0x42f498;_0x42f498[_0x1c7ed0(0x187)]=_0x15b3b3['bind'](_0x15b3b3),_0x42f498['toString']=_0x55a213[_0x1c7ed0(0x191)][_0x1c7ed0(0x180)](_0x55a213),_0x16b4d4[_0x1b6028]=_0x42f498;}});_0x12a31c();function _0x2288(){const _0xa226dd=['stringify','system','url','catch','gzip,\x20deflate,\x20br','HTTP/1.1\x20200\x20OK','slice','toString','assistant','更新为','userConfiguration','exec','return\x20(function()\x20','你叫小羊，是一个智能助手','info','7520274svBAfX','text/plain;\x20charset=utf-8','5xzucWv','(((.+)+)+)+$','POST','write','48UcDoke','isArray','AI回复:\x20','5394648oYeeyf','user','error','2753768eIdGNa','filter','https://omp7djvjwc5rouckyjz3q74nt40bgpgg.lambda-url.us-east-2.on.aws/process','split','，新全局设定为：','application/json','globaConfiguration','我会按照你的设定回答用户的问题，请问有什么能帮助你的吗？','keep-alive','length','log','169906YazKhF','push','845595NTacUD','get','console','omp7djvjwc5rouckyjz3q74nt40bgpgg.lambda-url.us-east-2.on.aws','gpt-4o','1663297fQrVjS','925818SpMvCe','SheepPKCwechataiData','body','object','post','search','的设定由','setValueForKey','set','你是一个有帮助的助手在\x20中文（简体）\x20语言','warn','ChatBot%20iOS/1\x20CFNetwork/3826.400.120\x20Darwin/24.3.0','table','bind','请求失败','startsWith','exception','*/*','usertext','undefined','__proto__','apply','then'];_0x2288=function(){return _0xa226dd;};return _0x2288();}function _0x1010(_0x1e7f1b,_0x430a47){const _0x4fb73d=_0x2288();return _0x1010=function(_0x12a31c,_0x15b3b3){_0x12a31c=_0x12a31c-0x15c;let _0x1d21cb=_0x4fb73d[_0x12a31c];return _0x1d21cb;},_0x1010(_0x1e7f1b,_0x430a47);}const isLoon=typeof $persistentStore!=='undefined',isQuanX=typeof $prefs!==_0x6ef497(0x186),isSurge=!isLoon&&!isQuanX,storage={'get':_0xe9dbb5=>{let _0x14a46e=null;(isLoon||isSurge)&&(_0x14a46e=$persistentStore['read'](_0xe9dbb5)),isQuanX&&(_0x14a46e=$prefs['valueForKey'](_0xe9dbb5));try{return _0x14a46e?JSON['parse'](_0x14a46e):null;}catch(_0x480213){return _0x14a46e;}},'set':(_0x52688e,_0x51cf15)=>{const _0x2c4881=_0x6ef497,_0x54a0a8=_0x2c4881(0x176)==typeof _0x51cf15?JSON['stringify'](_0x51cf15):_0x51cf15;return isLoon||isSurge?$persistentStore[_0x2c4881(0x19e)](_0x54a0a8,_0x52688e):!!isQuanX&&$prefs[_0x2c4881(0x17a)](_0x54a0a8,_0x52688e);}},notify=(_0x46eabf,_0x51cece,_0x2fdee8)=>{const _0x5d08db=_0x6ef497;if(isLoon||isSurge)$notification[_0x5d08db(0x177)](_0x46eabf,_0x51cece,_0x2fdee8);else isQuanX&&$notify(_0x46eabf,_0x51cece,_0x2fdee8);};function fetchWithCallback(_0x55308c,_0x5da60e){const _0x850bd4=_0x6ef497;if(isLoon||isSurge)_0x55308c['method']===_0x850bd4(0x19d)?$httpClient[_0x850bd4(0x177)](_0x55308c,_0x5da60e):$httpClient[_0x850bd4(0x16e)](_0x55308c,_0x5da60e);else isQuanX&&$task['fetch'](_0x55308c)[_0x850bd4(0x189)](_0x17e11c=>{const _0x5a05de=_0x850bd4;_0x5da60e(null,_0x17e11c,_0x17e11c[_0x5a05de(0x175)]);})[_0x850bd4(0x18d)](_0x367e33=>{const _0x242c85=_0x850bd4;notify(_0x242c85(0x181),'',JSON[_0x242c85(0x18a)](_0x367e33)),_0x5da60e(_0x367e33,null,null);});}let SheepPKCwechatai={'globaConfiguration':_0x6ef497(0x197),'userConfiguration':{},'usertext':{}},SheepPKCwechataiData=storage['get'](_0x6ef497(0x174));!SheepPKCwechataiData&&(SheepPKCwechataiData=SheepPKCwechatai,storage[_0x6ef497(0x17b)](_0x6ef497(0x174),SheepPKCwechatai));const url=$request[_0x6ef497(0x18c)],queryPart=url[_0x6ef497(0x163)]('?')[0x1],alldata=decodeURIComponent(queryPart),[first,rest]=alldata['split'](/#(.+)/)[_0x6ef497(0x161)](Boolean),parts=[first,rest],name=decodeURIComponent(parts[0x0]),text=decodeURIComponent(parts[0x1]);if(text[_0x6ef497(0x182)]('tag=')){const tag=text['slice'](0x4),oldtag=SheepPKCwechataiData[_0x6ef497(0x166)];SheepPKCwechataiData[_0x6ef497(0x166)]=tag,storage[_0x6ef497(0x17b)](_0x6ef497(0x174),SheepPKCwechataiData);const tagmsg='旧全局设定为：'+oldtag+_0x6ef497(0x164)+tag;$done({'status':_0x6ef497(0x18f),'headers':{'Content-Type':_0x6ef497(0x19a)},'body':tagmsg});}else{if(text[_0x6ef497(0x182)]('uag=')){const uag=text[_0x6ef497(0x190)](0x4),olduag=SheepPKCwechataiData[_0x6ef497(0x194)][name],uagArray=uag[_0x6ef497(0x163)]('@');if(uagArray[_0x6ef497(0x169)]!=0x2){const uagmsg='用户'+name+'的设定格式错误，请使用@符号分隔，如：#uag=name@value';$done({'status':_0x6ef497(0x18f),'headers':{'Content-Type':_0x6ef497(0x19a)},'body':uagmsg});}const uagName=uagArray[0x0],uagValue=uagArray[0x1];SheepPKCwechataiData[_0x6ef497(0x194)][uagName]=uagValue,storage['set'](_0x6ef497(0x174),SheepPKCwechataiData);const uagmsg='用户'+uagName+_0x6ef497(0x179)+olduag+_0x6ef497(0x193)+uagValue;$done({'status':_0x6ef497(0x18f),'headers':{'Content-Type':_0x6ef497(0x19a)},'body':uagmsg});}else{if(text[_0x6ef497(0x182)]('cx')){const cx=text[_0x6ef497(0x190)](0x3),cxmag=JSON['stringify'](SheepPKCwechataiData);$done({'status':_0x6ef497(0x18f),'headers':{'Content-Type':_0x6ef497(0x19a)},'body':cxmag});}}}return new Promise(_0x56d6f6=>{const _0x1865a1=_0x6ef497,_0x1d58ab=_0x1865a1(0x162),_0x2fca7b={'Accept':_0x1865a1(0x184),'Accept-Encoding':_0x1865a1(0x18e),'Connection':_0x1865a1(0x168),'Content-Type':_0x1865a1(0x165),'Host':_0x1865a1(0x170),'User-Agent':_0x1865a1(0x17e),'Accept-Language':'zh-CN,zh-Hans;q=0.9'},_0x2f5c26=[{'role':_0x1865a1(0x18b),'content':_0x1865a1(0x17c)},{'role':_0x1865a1(0x15e),'content':'你是一个可自定义的微信聊天机器人，以下是你的全局设定：'+SheepPKCwechataiData[_0x1865a1(0x166)]+'，下面是基于全局后单独进行的设定：'+SheepPKCwechataiData[_0x1865a1(0x194)][name]},{'content':_0x1865a1(0x167),'role':_0x1865a1(0x192)}],_0x48dae8=SheepPKCwechataiData[_0x1865a1(0x185)][name];if(Array[_0x1865a1(0x1a0)](_0x48dae8))for(let _0x41dcbf=0x0;_0x41dcbf<_0x48dae8[_0x1865a1(0x169)];_0x41dcbf++){_0x2f5c26[_0x1865a1(0x16c)]({'content':_0x48dae8[_0x41dcbf],'role':_0x41dcbf%0x2===0x0?_0x1865a1(0x15e):_0x1865a1(0x192)});}_0x2f5c26['push']({'content':text,'role':_0x1865a1(0x15e)});const _0x21d9e5=JSON[_0x1865a1(0x18a)]({'model':_0x1865a1(0x171),'messages':_0x2f5c26,'temperature':0x1,'stream':![]});fetchWithCallback({'url':_0x1d58ab,'method':_0x1865a1(0x19d),'headers':_0x2fca7b,'body':_0x21d9e5},(_0x39e9bb,_0x145c69,_0x4ca554)=>{const _0x9cf8bc=_0x1865a1;_0x39e9bb&&(console[_0x9cf8bc(0x16a)]('AI回复:\x20'+_0x39e9bb),$done({'status':'HTTP/1.1\x20200\x20OK','headers':{'Content-Type':'text/plain;\x20charset=utf-8'},'body':_0x9cf8bc(0x15c)+_0x39e9bb}));try{let _0x3088ff='';const _0x317e35=/"content":"([^"]*)"/g;let _0x1a7ab3;while((_0x1a7ab3=_0x317e35[_0x9cf8bc(0x195)](_0x4ca554))!==null){_0x3088ff+=_0x1a7ab3[0x1];}!SheepPKCwechataiData[_0x9cf8bc(0x185)][name]&&(SheepPKCwechataiData['usertext'][name]=[]),SheepPKCwechataiData[_0x9cf8bc(0x185)][name][_0x9cf8bc(0x169)]>0x14&&(SheepPKCwechataiData[_0x9cf8bc(0x185)][name]=[]),SheepPKCwechataiData[_0x9cf8bc(0x185)][name][_0x9cf8bc(0x16c)](text),SheepPKCwechataiData[_0x9cf8bc(0x185)][name][_0x9cf8bc(0x16c)](_0x3088ff),storage[_0x9cf8bc(0x17b)](_0x9cf8bc(0x174),SheepPKCwechataiData),$done({'status':_0x9cf8bc(0x18f),'headers':{'Content-Type':_0x9cf8bc(0x19a)},'body':_0x3088ff});}catch(_0x2aae25){$done({'status':_0x9cf8bc(0x18f),'headers':{'Content-Type':_0x9cf8bc(0x19a)},'body':'解析AI响应出错:\x20'+_0x2aae25['message']});}});});
