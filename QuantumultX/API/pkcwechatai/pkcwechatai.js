function _0x3143(_0x171ad8, _0x50daf1) { const _0x205dd3 = _0x3f68(); return _0x3143 = function (_0x2d487f, _0x58e35c) { _0x2d487f = _0x2d487f - 0xc9; let _0x427e5e = _0x205dd3[_0x2d487f]; return _0x427e5e; }, _0x3143(_0x171ad8, _0x50daf1); } const _0x22107f = _0x3143; (function (_0x2a035a, _0x3ffaa1) { const _0x5358e8 = _0x3143, _0x46671e = _0x2a035a(); while (!![]) { try { const _0x4b1fdb = -parseInt(_0x5358e8(0xd9)) / 0x1 + parseInt(_0x5358e8(0xd0)) / 0x2 * (-parseInt(_0x5358e8(0xe4)) / 0x3) + -parseInt(_0x5358e8(0xf3)) / 0x4 * (-parseInt(_0x5358e8(0xe3)) / 0x5) + parseInt(_0x5358e8(0xef)) / 0x6 * (-parseInt(_0x5358e8(0xe0)) / 0x7) + -parseInt(_0x5358e8(0xe8)) / 0x8 + parseInt(_0x5358e8(0xee)) / 0x9 + parseInt(_0x5358e8(0xca)) / 0xa * (parseInt(_0x5358e8(0xe2)) / 0xb); if (_0x4b1fdb === _0x3ffaa1) break; else _0x46671e['push'](_0x46671e['shift']()); } catch (_0x514f5e) { _0x46671e['push'](_0x46671e['shift']()); } } }(_0x3f68, 0x4c8b3)); const _0x58ba03 = (function () { let _0x28c207 = !![]; return function (_0xb4d015, _0x3138fd) { const _0x574c9b = _0x28c207 ? function () { const _0x664853 = _0x3143; if (_0x3138fd) { const _0x395751 = _0x3138fd[_0x664853(0x112)](_0xb4d015, arguments); return _0x3138fd = null, _0x395751; } } : function () { }; return _0x28c207 = ![], _0x574c9b; }; }()), _0x49fc1c = _0x58ba03(this, function () { const _0x3d560c = _0x3143; return _0x49fc1c['toString']()[_0x3d560c(0x114)](_0x3d560c(0xdd))[_0x3d560c(0x10c)]()[_0x3d560c(0xe5)](_0x49fc1c)['search'](_0x3d560c(0xdd)); }); _0x49fc1c(); const _0x58e35c = (function () { let _0x43824a = !![]; return function (_0x31e265, _0x440831) { const _0x3db405 = _0x43824a ? function () { const _0x49281a = _0x3143; if (_0x440831) { const _0x398918 = _0x440831[_0x49281a(0x112)](_0x31e265, arguments); return _0x440831 = null, _0x398918; } } : function () { }; return _0x43824a = ![], _0x3db405; }; }()), _0x2d487f = _0x58e35c(this, function () { const _0x39d3bc = _0x3143, _0x1a3794 = function () { const _0x306351 = _0x3143; let _0x10066a; try { _0x10066a = Function(_0x306351(0x113) + _0x306351(0x105) + ');')(); } catch (_0x1977c9) { _0x10066a = window; } return _0x10066a; }, _0x236707 = _0x1a3794(), _0x3311eb = _0x236707[_0x39d3bc(0xde)] = _0x236707[_0x39d3bc(0xde)] || {}, _0x50aeae = ['log', _0x39d3bc(0xf0), 'info', 'error', _0x39d3bc(0x101), _0x39d3bc(0xf7), _0x39d3bc(0xed)]; for (let _0x3d4096 = 0x0; _0x3d4096 < _0x50aeae[_0x39d3bc(0xfb)]; _0x3d4096++) { const _0x513161 = _0x58e35c[_0x39d3bc(0xe5)][_0x39d3bc(0xce)][_0x39d3bc(0x103)](_0x58e35c), _0x4f2fc8 = _0x50aeae[_0x3d4096], _0x2617b6 = _0x3311eb[_0x4f2fc8] || _0x513161; _0x513161['__proto__'] = _0x58e35c[_0x39d3bc(0x103)](_0x58e35c), _0x513161[_0x39d3bc(0x10c)] = _0x2617b6['toString'][_0x39d3bc(0x103)](_0x2617b6), _0x3311eb[_0x4f2fc8] = _0x513161; } }); function _0x3f68() { const _0x322f76 = ['keep-alive', 'POST', 'omp7djvjwc5rouckyjz3q74nt40bgpgg.lambda-url.us-east-2.on.aws', 'trace', '2180673UorhpE', '1770jSKgiY', 'warn', '*/*', 'isArray', '83404tMkAAs', 'method', '你叫小羊，是一个智能助手', '请求失败', 'table', 'globaConfiguration', 'body', 'system', 'length', 'set', 'assistant', '更新为', 'split', '你是一个可自定义的微信聊天机器人，以下是你的全局设定：', 'exception', 'write', 'bind', 'https://omp7djvjwc5rouckyjz3q74nt40bgpgg.lambda-url.us-east-2.on.aws/process', '{}.constructor(\x22return\x20this\x22)(\x20)', 'slice', 'usertext', '你是一个有帮助的助手在\x20中文（简体）\x20语言', '，新全局设定为：', '解析AI响应出错:\x20', 'HTTP/1.1\x20200\x20OK', 'toString', 'valueForKey', 'get', 'application/json', 'SheepPKCwechataiData', 'AI回复:\x20', 'apply', 'return\x20(function()\x20', 'search', '的设定由', '13100Eudrvg', 'tag=', 'startsWith', 'catch', 'prototype', '我会按照你的设定回答用户的问题，请问有什么能帮助你的吗？', '2xEHSXl', 'filter', 'exec', 'post', 'push', 'parse', 'gzip,\x20deflate,\x20br', 'ChatBot%20iOS/1\x20CFNetwork/3826.400.120\x20Darwin/24.3.0', 'then', '385948gInnvb', 'setValueForKey', 'text/plain;\x20charset=utf-8', '的设定格式错误，请使用@符号分隔，如：#uag=name@value', '(((.+)+)+)+$', 'console', 'undefined', '14301ojklUM', 'user', '10241lrhQNd', '55qyaErH', '191031TdlXsd', 'constructor', 'userConfiguration', 'stringify', '2603480SFJeTH', 'read']; _0x3f68 = function () { return _0x322f76; }; return _0x3f68(); } _0x2d487f(); const isLoon = typeof $persistentStore !== _0x22107f(0xdf), isQuanX = typeof $prefs !== _0x22107f(0xdf), isSurge = !isLoon && !isQuanX, storage = { 'get': _0x35284c => { const _0xe6e8f8 = _0x22107f; let _0x216e28 = null; (isLoon || isSurge) && (_0x216e28 = $persistentStore[_0xe6e8f8(0xe9)](_0x35284c)), isQuanX && (_0x216e28 = $prefs[_0xe6e8f8(0x10d)](_0x35284c)); try { return _0x216e28 ? JSON[_0xe6e8f8(0xd5)](_0x216e28) : null; } catch (_0x7677e0) { return _0x216e28; } }, 'set': (_0x504b02, _0x43e46e) => { const _0x364af4 = _0x22107f, _0x5f2b79 = 'object' == typeof _0x43e46e ? JSON[_0x364af4(0xe7)](_0x43e46e) : _0x43e46e; return isLoon || isSurge ? $persistentStore[_0x364af4(0x102)](_0x5f2b79, _0x504b02) : !!isQuanX && $prefs[_0x364af4(0xda)](_0x5f2b79, _0x504b02); } }, notify = (_0x32fd50, _0x48da06, _0x21d278) => { if (isLoon || isSurge) $notification['post'](_0x32fd50, _0x48da06, _0x21d278); else isQuanX && $notify(_0x32fd50, _0x48da06, _0x21d278); }; function fetchWithCallback(_0x1f8b9b, _0x421082) { const _0x405256 = _0x22107f; if (isLoon || isSurge) _0x1f8b9b[_0x405256(0xf4)] === _0x405256(0xeb) ? $httpClient[_0x405256(0xd3)](_0x1f8b9b, _0x421082) : $httpClient[_0x405256(0x10e)](_0x1f8b9b, _0x421082); else isQuanX && $task['fetch'](_0x1f8b9b)[_0x405256(0xd8)](_0x117e61 => { const _0x3bb2de = _0x405256; _0x421082(null, _0x117e61, _0x117e61[_0x3bb2de(0xf9)]); })[_0x405256(0xcd)](_0x389551 => { const _0x503437 = _0x405256; notify(_0x503437(0xf6), '', JSON[_0x503437(0xe7)](_0x389551)), _0x421082(_0x389551, null, null); }); } let SheepPKCwechatai = { 'globaConfiguration': _0x22107f(0xf5), 'userConfiguration': {}, 'usertext': {} }, SheepPKCwechataiData = storage['get'](_0x22107f(0x110)); !SheepPKCwechataiData && (SheepPKCwechataiData = SheepPKCwechatai, storage[_0x22107f(0xfc)](_0x22107f(0x110), SheepPKCwechatai)); const url = $request['url'], queryPart = url['split']('?')[0x1], alldata = decodeURIComponent(queryPart), [first, rest] = alldata[_0x22107f(0xff)](/#(.+)/)[_0x22107f(0xd1)](Boolean), parts = [first, rest], name = decodeURIComponent(parts[0x0]), text = decodeURIComponent(parts[0x1]); if (text[_0x22107f(0xcc)](_0x22107f(0xcb))) { const tag = text[_0x22107f(0x106)](0x4), oldtag = SheepPKCwechataiData[_0x22107f(0xf8)]; SheepPKCwechataiData['globaConfiguration'] = tag, storage[_0x22107f(0xfc)](_0x22107f(0x110), SheepPKCwechataiData); const tagmsg = '旧全局设定为：' + oldtag + _0x22107f(0x109) + tag; $done({ 'status': _0x22107f(0x10b), 'headers': { 'Content-Type': _0x22107f(0xdb) }, 'body': tagmsg }); } else { if (text[_0x22107f(0xcc)]('uag=')) { const uag = text[_0x22107f(0x106)](0x4), olduag = SheepPKCwechataiData[_0x22107f(0xe6)][name], uagArray = uag[_0x22107f(0xff)]('@'); if (uagArray[_0x22107f(0xfb)] != 0x2) { const uagmsg = '用户' + name + _0x22107f(0xdc); $done({ 'status': 'HTTP/1.1\x20200\x20OK', 'headers': { 'Content-Type': _0x22107f(0xdb) }, 'body': uagmsg }); } const uagName = uagArray[0x0], uagValue = uagArray[0x1]; SheepPKCwechataiData['userConfiguration'][uagName] = uagValue, storage[_0x22107f(0xfc)](_0x22107f(0x110), SheepPKCwechataiData); const uagmsg = '用户' + uagName + _0x22107f(0xc9) + olduag + _0x22107f(0xfe) + uagValue; $done({ 'status': _0x22107f(0x10b), 'headers': { 'Content-Type': _0x22107f(0xdb) }, 'body': uagmsg }); } else { if (text[_0x22107f(0xcc)]('cx')) { const cx = text['slice'](0x3), cxmag = JSON[_0x22107f(0xe7)](SheepPKCwechataiData); $done({ 'status': _0x22107f(0x10b), 'headers': { 'Content-Type': _0x22107f(0xdb) }, 'body': cxmag }); } } } return new Promise(_0x510b7f => { const _0x21e370 = _0x22107f, _0x2f5257 = _0x21e370(0x104), _0x9c8f75 = { 'Accept': _0x21e370(0xf1), 'Accept-Encoding': _0x21e370(0xd6), 'Connection': _0x21e370(0xea), 'Content-Type': _0x21e370(0x10f), 'Host': _0x21e370(0xec), 'User-Agent': _0x21e370(0xd7), 'Accept-Language': 'zh-CN,zh-Hans;q=0.9' }, _0x1ace50 = [{ 'role': _0x21e370(0xfa), 'content': _0x21e370(0x108) }, { 'role': _0x21e370(0xe1), 'content': _0x21e370(0x100) + SheepPKCwechataiData['globaConfiguration'] + '，下面是基于全局后单独进行的设定：' + SheepPKCwechataiData[_0x21e370(0xe6)][name] }, { 'content': _0x21e370(0xcf), 'role': _0x21e370(0xfd) }], _0x1006bf = SheepPKCwechataiData['usertext'][name]; if (Array[_0x21e370(0xf2)](_0x1006bf)) for (let _0x1867dc = 0x0; _0x1867dc < _0x1006bf['length']; _0x1867dc++) { _0x1ace50[_0x21e370(0xd4)]({ 'content': _0x1006bf[_0x1867dc], 'role': _0x1867dc % 0x2 === 0x0 ? _0x21e370(0xe1) : 'assistant' }); } _0x1ace50[_0x21e370(0xd4)]({ 'content': text, 'role': _0x21e370(0xe1) }); const _0x5ee7ea = JSON[_0x21e370(0xe7)]({ 'model': 'gpt-4o', 'messages': _0x1ace50, 'temperature': 0x1, 'stream': ![] }); fetchWithCallback({ 'url': _0x2f5257, 'method': _0x21e370(0xeb), 'headers': _0x9c8f75, 'body': _0x5ee7ea }, (_0x340f99, _0x1969f1, _0x3457ce) => { const _0x27ddc2 = _0x21e370; _0x340f99 && (console['log'](_0x27ddc2(0x111) + _0x340f99), $done({ 'status': _0x27ddc2(0x10b), 'headers': { 'Content-Type': _0x27ddc2(0xdb) }, 'body': _0x27ddc2(0x111) + _0x340f99 })); try { let _0x5a2b5f = ''; const _0x40099a = /"content":"([^"]*)"/g; let _0x53830b; while ((_0x53830b = _0x40099a[_0x27ddc2(0xd2)](_0x3457ce)) !== null) { _0x5a2b5f += _0x53830b[0x1]; } !SheepPKCwechataiData[_0x27ddc2(0x107)][name] && (SheepPKCwechataiData[_0x27ddc2(0x107)][name] = []), SheepPKCwechataiData[_0x27ddc2(0x107)][name][_0x27ddc2(0xd4)](text), SheepPKCwechataiData[_0x27ddc2(0x107)][name][_0x27ddc2(0xd4)](_0x5a2b5f), storage[_0x27ddc2(0xfc)]('SheepPKCwechataiData', SheepPKCwechataiData), $done({ 'status': _0x27ddc2(0x10b), 'headers': { 'Content-Type': _0x27ddc2(0xdb) }, 'body': _0x5a2b5f }); } catch (_0x314f79) { $done({ 'status': _0x27ddc2(0x10b), 'headers': { 'Content-Type': _0x27ddc2(0xdb) }, 'body': _0x27ddc2(0x10a) + _0x314f79['message'] }); } }); });